-- ============================================
-- EULA ì—…ë°ì´íŠ¸: 24ì‹œê°„ ëŒ€ì‘ ì •ì±… ë° ê°œë°œì ì—°ë½ì²˜ ì¶”ê°€
-- App Store Guideline 1.2 ì¤€ìˆ˜ë¥¼ ìœ„í•œ ì—…ë°ì´íŠ¸
-- ============================================

-- ê¸°ì¡´ ì´ìš©ì•½ê´€ ë²„ì „ì„ ë¹„í™œì„±í™”í•˜ê³  ìƒˆ ë²„ì „ ì¶”ê°€
UPDATE user_agreement_versions 
SET is_active = false, updated_at = NOW()
WHERE version_code = '1.0.0' AND agreement_type = 'terms_of_service';

-- ìƒˆë¡œìš´ ì´ìš©ì•½ê´€ ë²„ì „ ì¶”ê°€ (24ì‹œê°„ ëŒ€ì‘ ì •ì±… í¬í•¨)
INSERT INTO user_agreement_versions (version_code, title, content, agreement_type, is_mandatory, effective_date) VALUES 
('1.1.0', 
 '{"ko": "ì´ìš©ì•½ê´€", "en": "Terms of Service", "ja": "åˆ©ç”¨è¦ç´„"}',
 '{"ko": "BabyMom ì´ìš©ì•½ê´€ (v1.1.0)\n\nì œ1ì¡° (ëª©ì )\në³¸ ì•½ê´€ì€ ì‚¬ìš©ì ìƒì„± ì½˜í…ì¸ ì— ëŒ€í•œ ì •ì±…ì„ í¬í•¨í•˜ì—¬, ëª¨ë“  ì‚¬ìš©ìê°€ ì•ˆì „í•˜ê³  ê±´ì „í•œ í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\n\nì œ2ì¡° (ì‚¬ìš©ì ìƒì„± ì½˜í…ì¸ )\n1. ì‚¬ìš©ìëŠ” ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ í•´ë¡œìš´, ìœ„í˜‘ì ì¸, ë¶ˆë²•ì ì¸, ì¤‘ìƒëª¨ëµí•˜ëŠ”, ìŒë€í•œ, ëª¨ë…ì ì¸, ë˜ëŠ” ê¸°íƒ€ ë¶€ì ì ˆí•œ ë‚´ìš©ì„ ê²Œì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n2. íšŒì‚¬ëŠ” ë¶€ì ì ˆí•œ ì½˜í…ì¸  ë° ë‚¨ìš© ì‚¬ìš©ìì— ëŒ€í•´ ë¬´ê´€ìš© ì •ì±…ì„ ì ìš©í•©ë‹ˆë‹¤.\n3. ìœ„ë°˜ ì‹œ ì‚¬ì „ í†µë³´ ì—†ì´ ê³„ì •ì´ ì •ì§€ë˜ê±°ë‚˜ ì‚­ì œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n4. íšŒì‚¬ëŠ” ìë™í™”ëœ ì½˜í…ì¸  í•„í„°ë§ ì‹œìŠ¤í…œì„ ìš´ì˜í•˜ì—¬ ë¶€ì ì ˆí•œ ë‚´ìš©ì´ ê²Œì‹œë˜ëŠ” ê²ƒì„ ì‚¬ì „ì— ë°©ì§€í•©ë‹ˆë‹¤.\n\nì œ3ì¡° (ì‹ ê³  ë° ì°¨ë‹¨ ì‹œìŠ¤í…œ)\n1. ì‚¬ìš©ìëŠ” ë¶€ì ì ˆí•œ ì½˜í…ì¸ ë‚˜ í–‰ìœ„ë¥¼ ì‹ ê³ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n2. ì‚¬ìš©ìëŠ” ë‹¤ë¥¸ ì‚¬ìš©ìë¥¼ ì°¨ë‹¨í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µë°›ìŠµë‹ˆë‹¤.\n3. íšŒì‚¬ëŠ” ëª¨ë“  ì‹ ê³ ë¥¼ 24ì‹œê°„ ë‚´ì— ê²€í† í•˜ê³  ì ì ˆí•œ ì¡°ì¹˜ë¥¼ ì·¨í•©ë‹ˆë‹¤.\n4. ê¸´ê¸‰í•œ ê²½ìš° ì¦‰ì‹œ ëŒ€ì‘í•˜ë©°, í•„ìš”ì‹œ ê´€ë ¨ ì½˜í…ì¸ ë¥¼ ì„ì‹œ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n5. ì‹ ê³  ì²˜ë¦¬ ê²°ê³¼ëŠ” ì‹ ê³ ìì—ê²Œ í†µì§€ë©ë‹ˆë‹¤.\n\nì œ4ì¡° (ê°œë°œì ì—°ë½ì²˜)\në¶€ì ì ˆí•œ ì½˜í…ì¸  ì‹ ê³ ë‚˜ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ë‹¤ìŒ ë°©ë²•ìœ¼ë¡œ ì—°ë½í•´ì£¼ì„¸ìš”:\n- ì•± ë‚´: ì„¤ì • â†’ ë„ì›€ë§ â†’ ê°œë°œìì—ê²Œ ì—°ë½í•˜ê¸°\n- ì´ë©”ì¼: support@babymom.app\n- ì‘ë‹µì‹œê°„: ì˜ì—…ì¼ ê¸°ì¤€ 24ì‹œê°„ ì´ë‚´", "en": "BabyMom Terms of Service (v1.1.0)\n\nArticle 1 (Purpose)\nThese terms include policies for user-generated content to ensure all users can use the service in a safe and healthy environment.\n\nArticle 2 (User-Generated Content)\n1. Users cannot post content that is harmful, threatening, illegal, defamatory, obscene, abusive, or otherwise objectionable to other users.\n2. The company applies a zero-tolerance policy for objectionable content and abusive users.\n3. Accounts may be suspended or deleted without prior notice for violations.\n4. The company operates automated content filtering systems to prevent inappropriate content from being posted.\n\nArticle 3 (Reporting and Blocking System)\n1. Users can report inappropriate content or behavior.\n2. Users are provided with the ability to block other users.\n3. The company will review all reports within 24 hours and take appropriate action.\n4. In urgent cases, we respond immediately and may temporarily restrict relevant content if necessary.\n5. Report processing results will be notified to the reporter.\n\nArticle 4 (Developer Contact Information)\nFor reporting inappropriate content or inquiries, please contact us through:\n- In-app: Settings â†’ Help â†’ Contact Developer\n- Email: support@babymom.app\n- Response time: Within 24 hours on business days", "ja": "BabyMom åˆ©ç”¨è¦ç´„ (v1.1.0)\n\nç¬¬1æ¡ï¼ˆç›®çš„ï¼‰\næœ¬è¦ç´„ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”Ÿæˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«é–¢ã™ã‚‹ãƒãƒªã‚·ãƒ¼ã‚’å«ã¿ã€ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®‰å…¨ã§å¥å…¨ãªç’°å¢ƒã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚\n\nç¬¬2æ¡ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç”Ÿæˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼‰\n1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æœ‰å®³ã€è„…è¿«çš„ã€é•æ³•ã€ä¸­å‚·çš„ã€ã‚ã„ã›ã¤ã€è™å¾…çš„ã€ã¾ãŸã¯ãã®ä»–ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æŠ•ç¨¿ã§ãã¾ã›ã‚“ã€‚\n2. å½“ç¤¾ã¯ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨æ‚ªç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã‚¼ãƒ­ãƒˆãƒ¬ãƒ©ãƒ³ã‚¹ãƒ»ãƒãƒªã‚·ãƒ¼ã‚’é©ç”¨ã—ã¾ã™ã€‚\n3. é•åæ™‚ã¯äº‹å‰é€šçŸ¥ãªã—ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒåœæ­¢ã¾ãŸã¯å‰Šé™¤ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚\n4. å½“ç¤¾ã¯è‡ªå‹•åŒ–ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã‚’é‹ç”¨ã—ã€ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æŠ•ç¨¿ã‚’äº‹å‰ã«é˜²æ­¢ã—ã¾ã™ã€‚\n\nç¬¬3æ¡ï¼ˆå ±å‘Šã¨ãƒ–ãƒ­ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ ï¼‰\n1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚„è¡Œç‚ºã‚’å ±å‘Šã§ãã¾ã™ã€‚\n2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹æ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¾ã™ã€‚\n3. å½“ç¤¾ã¯ã™ã¹ã¦ã®å ±å‘Šã‚’24æ™‚é–“ä»¥å†…ã«å¯©æŸ»ã—ã€é©åˆ‡ãªæªç½®ã‚’è¬›ã˜ã¾ã™ã€‚\n4. ç·Šæ€¥ã®å ´åˆã¯å³åº§ã«å¯¾å¿œã—ã€å¿…è¦ã«å¿œã˜ã¦é–¢é€£ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä¸€æ™‚çš„ã«åˆ¶é™ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚\n5. å ±å‘Šå‡¦ç†çµæœã¯å ±å‘Šè€…ã«é€šçŸ¥ã•ã‚Œã¾ã™ã€‚\n\nç¬¬4æ¡ï¼ˆé–‹ç™ºè€…é€£çµ¡å…ˆæƒ…å ±ï¼‰\nä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å ±å‘Šã‚„å•ã„åˆã‚ã›ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ï¼š\n- ã‚¢ãƒ—ãƒªå†…ï¼šè¨­å®š â†’ ãƒ˜ãƒ«ãƒ— â†’ é–‹ç™ºè€…ã«é€£çµ¡ã™ã‚‹\n- ãƒ¡ãƒ¼ãƒ«ï¼šsupport@babymom.app\n- å¿œç­”æ™‚é–“ï¼šå–¶æ¥­æ—¥24æ™‚é–“ä»¥å†…"}',
 'terms_of_service', 
 true,
 NOW());

-- ê¸°ì¡´ ì»¤ë®¤ë‹ˆí‹° ê°€ì´ë“œë¼ì¸ë„ ì—…ë°ì´íŠ¸
UPDATE user_agreement_versions 
SET is_active = false, updated_at = NOW()
WHERE version_code = '1.0.0' AND agreement_type = 'community_guidelines';

-- ìƒˆë¡œìš´ ì»¤ë®¤ë‹ˆí‹° ê°€ì´ë“œë¼ì¸ ë²„ì „ ì¶”ê°€
INSERT INTO user_agreement_versions (version_code, title, content, agreement_type, is_mandatory, effective_date) VALUES 
('1.1.0',
 '{"ko": "ì»¤ë®¤ë‹ˆí‹° ê°€ì´ë“œë¼ì¸", "en": "Community Guidelines", "ja": "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³"}',
 '{"ko": "BabyMom ì»¤ë®¤ë‹ˆí‹° ê°€ì´ë“œë¼ì¸ (v1.1.0)\n\n1. ì„œë¡œë¥¼ ì¡´ì¤‘í•˜ì„¸ìš”\n- ë‹¤ë¥¸ ì‚¬ìš©ìë¥¼ ê´´ë¡­íˆê±°ë‚˜ ìœ„í˜‘í•˜ì§€ ë§ˆì„¸ìš”\n- ê°œì¸ì •ë³´ë¥¼ ë¬´ë‹¨ìœ¼ë¡œ ê³µìœ í•˜ì§€ ë§ˆì„¸ìš”\n- ëª¨ë“  ì‚¬ìš©ìê°€ í™˜ì˜ë°›ëŠ” í™˜ê²½ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”\n\n2. ë¶€ì ì ˆí•œ ì½˜í…ì¸  ê¸ˆì§€\n- ìŠ¤íŒ¸, ê´‘ê³ , í˜ì˜¤ ë°œì–¸ ê¸ˆì§€\n- ìŒë€ë¬¼, í­ë ¥ì  ì½˜í…ì¸  ê¸ˆì§€\n- í—ˆìœ„ ì •ë³´ ìœ í¬ ê¸ˆì§€\n- ìë™ í•„í„°ë§ ì‹œìŠ¤í…œì´ ì˜ì‹¬ ì½˜í…ì¸ ë¥¼ ì‚¬ì „ ì°¨ë‹¨í•©ë‹ˆë‹¤\n\n3. ì‹ ê³  ë° ì°¨ë‹¨ ì‹œìŠ¤í…œ\n- ë¶€ì ì ˆí•œ ë‚´ìš©ì„ ë°œê²¬í•˜ë©´ ì¦‰ì‹œ ì‹ ê³ í•´ ì£¼ì„¸ìš”\n- ë¶ˆí¸í•œ ì‚¬ìš©ìëŠ” ì°¨ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤\n- ëª¨ë“  ì‹ ê³ ëŠ” 24ì‹œê°„ ë‚´ì— ì²˜ë¦¬ë©ë‹ˆë‹¤\n- í—ˆìœ„ ì‹ ê³  ì‹œ ì œì¬ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤\n\n4. ìœ„ë°˜ ì‹œ ì¡°ì¹˜\n- 1ì°¨: ê²½ê³  ë° ì½˜í…ì¸  ì‚­ì œ\n- 2ì°¨: ì„ì‹œ ì •ì§€ (1-7ì¼)\n- 3ì°¨: ì˜êµ¬ ì •ì§€\n- ì‹¬ê°í•œ ìœ„ë°˜ ì‹œ ì¦‰ì‹œ ì˜êµ¬ ì •ì§€\n\n5. ë¬¸ì˜ ë° ì´ì˜ì œê¸°\n- ì²˜ë¦¬ ê²°ê³¼ì— ë¬¸ì˜ê°€ ìˆìœ¼ë©´ ì–¸ì œë“  ì—°ë½í•˜ì„¸ìš”\n- ì„¤ì • â†’ ë„ì›€ë§ â†’ ê°œë°œìì—ê²Œ ì—°ë½í•˜ê¸°\n- support@babymom.app", "en": "BabyMom Community Guidelines (v1.1.0)\n\n1. Respect Each Other\n- Do not harass or threaten other users\n- Do not share personal information without permission\n- Create a welcoming environment for all users\n\n2. Prohibited Content\n- No spam, advertisements, or hate speech\n- No obscene or violent content\n- No spreading of false information\n- Automated filtering systems proactively block suspicious content\n\n3. Reporting and Blocking System\n- Please report inappropriate content immediately when found\n- You can block users who make you uncomfortable\n- All reports are processed within 24 hours\n- False reporting may result in penalties\n\n4. Actions for Violations\n- 1st: Warning and content removal\n- 2nd: Temporary suspension (1-7 days)\n- 3rd: Permanent ban\n- Immediate permanent ban for serious violations\n\n5. Inquiries and Appeals\n- Contact us anytime if you have questions about processing results\n- Settings â†’ Help â†’ Contact Developer\n- support@babymom.app", "ja": "BabyMom ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ (v1.1.0)\n\n1. ãŠäº’ã„ã‚’å°Šé‡ã—ã¾ã—ã‚‡ã†\n- ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å«ŒãŒã‚‰ã›ã—ãŸã‚Šè„…ã‹ã—ãŸã‚Šã—ãªã„ã§ãã ã•ã„\n- å€‹äººæƒ…å ±ã‚’ç„¡æ–­ã§å…±æœ‰ã—ãªã„ã§ãã ã•ã„\n- ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ­“è¿ã•ã‚Œã‚‹ç’°å¢ƒã‚’ä½œã‚Šã¾ã—ã‚‡ã†\n\n2. ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ç¦æ­¢\n- ã‚¹ãƒ‘ãƒ ã€åºƒå‘Šã€ãƒ˜ã‚¤ãƒˆã‚¹ãƒ”ãƒ¼ãƒã®ç¦æ­¢\n- ã‚ã„ã›ã¤ç‰©ã€æš´åŠ›çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ç¦æ­¢\n- è™šå½æƒ…å ±ã®æ‹¡æ•£ç¦æ­¢\n- è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ãŒç–‘ã‚ã—ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’äº‹å‰ã«ãƒ–ãƒ­ãƒƒã‚¯ã—ã¾ã™\n\n3. å ±å‘Šã¨ãƒ–ãƒ­ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ \n- ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç™ºè¦‹ã—ãŸã‚‰ã™ãã«å ±å‘Šã—ã¦ãã ã•ã„\n- ä¸å¿«ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã§ãã¾ã™\n- ã™ã¹ã¦ã®å ±å‘Šã¯24æ™‚é–“ä»¥å†…ã«å‡¦ç†ã•ã‚Œã¾ã™\n- è™šå½ã®å ±å‘Šã¯åˆ¶è£ã‚’å—ã‘ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™\n\n4. é•åæ™‚ã®æªç½®\n- 1å›ç›®ï¼šè­¦å‘Šã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‰Šé™¤\n- 2å›ç›®ï¼šä¸€æ™‚åœæ­¢ï¼ˆ1-7æ—¥ï¼‰\n- 3å›ç›®ï¼šæ°¸ä¹…åœæ­¢\n- æ·±åˆ»ãªé•åã®å ´åˆã¯å³åº§ã«æ°¸ä¹…åœæ­¢\n\n5. å•ã„åˆã‚ã›ã¨ç•°è­°ç”³ã—ç«‹ã¦\n- å‡¦ç†çµæœã«ã¤ã„ã¦è³ªå•ãŒã‚ã‚‹å ´åˆã¯ã„ã¤ã§ã‚‚ãŠå•ã„åˆã‚ã›ãã ã•ã„\n- è¨­å®š â†’ ãƒ˜ãƒ«ãƒ— â†’ é–‹ç™ºè€…ã«é€£çµ¡ã™ã‚‹\n- support@babymom.app"}',
 'community_guidelines',
 true,
 NOW());

-- ì„±ê³µ ë©”ì‹œì§€
DO $$
BEGIN
  RAISE NOTICE 'âœ… EULA ë° ì»¤ë®¤ë‹ˆí‹° ê°€ì´ë“œë¼ì¸ì´ v1.1.0ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.';
  RAISE NOTICE 'ğŸ“‹ ì¶”ê°€ëœ ë‚´ìš©:';
  RAISE NOTICE '   - 24ì‹œê°„ ë‚´ ì‹ ê³  ì²˜ë¦¬ ì•½ì†';
  RAISE NOTICE '   - ìë™ ì½˜í…ì¸  í•„í„°ë§ ì‹œìŠ¤í…œ ëª…ì‹œ';
  RAISE NOTICE '   - ê°œë°œì ì—°ë½ì²˜ ì •ë³´ (support@babymom.app)';
  RAISE NOTICE '   - ìƒì„¸í•œ ìœ„ë°˜ ì‹œ ì¡°ì¹˜ ê°€ì´ë“œë¼ì¸';
END $$;